# AI エージェント共通作業方針

## 目的

このドキュメントは、一般的な AI エージェントがこのプロジェクトで作業する際の基本方針を定義します。

## 基本方針

- **会話言語**: 日本語
- **コメント言語**: 日本語
- **エラーメッセージ言語**: 英語
- **コミット規約**: Conventional Commits に従い、`<description>` は日本語で記載
  - 例: `feat: 自動更新機能を追加`
- **ブランチ命名**: Conventional Branch に従う
  - 例: `feat/add-auto-update`

## 判断記録のルール

判断を行う際は、以下を記録すること:

1. 判断内容の要約
2. 検討した代替案
3. 採用した案とその理由
4. 採用しなかった案とその理由
5. 前提条件・仮定・不確実性の明示

仮定を事実のように扱わず、不確実性を明示すること。

## プロジェクト概要

- **目的**: 日付つきの作業ディレクトリを素早く作成して移動するためのシェル関数ユーティリティ
- **主な機能**:
  - `~/work/YYYYMMDD_name` を自動作成
  - 作成後そのディレクトリへ `cd`
  - 自動更新チェック・更新機能
  - インストール/アンインストール
- **技術スタック**: Bash / POSIX Shell
- **依存コマンド**: curl, jq, sha256sum/shasum（更新機能のみ）

## 開発手順（概要）

1. **プロジェクト理解**
   - `README.md` と `mkwork.sh` を読み、プロジェクトの目的と構造を理解する

2. **変更実装**
   - POSIX Shell 互換の記法を使用する
   - 関数名は `mkwork__` プレフィックスを使用する
   - コメントは日本語、エラーメッセージは英語で記載する

3. **テストと静的解析実行**
   ```bash
   # シンタックスチェック
   sh -n mkwork.sh

   # ShellCheck による静的解析
   shellcheck mkwork.sh

   # スモークテスト
   # 一時ディレクトリでテスト実行
   tmp_dir="$(mktemp -d)"
   export HOME="$tmp_dir/home"
   mkdir -p "$HOME"
   . ./mkwork.sh
   mkwork --version
   mkwork --doctor
   mkwork testdir
   test -d "$HOME/work/$(date +%Y%m%d)_testdir"
   ```

4. **ドキュメント更新**
   - `README.md` (英語)
   - `README-ja.md` (日本語)

## セキュリティ / 機密情報

- API キーや認証情報を Git にコミットしない
- ログに個人情報や認証情報を出力しない
- ダウンロードしたファイルは SHA256 チェックサムで検証する
- 外部コマンドの実行結果を適切にエスケープする

## リポジトリ固有

- このプロジェクトは単一の `mkwork.sh` ファイルで構成される
- リリース時に GitHub Actions が自動的にバージョンを注入し、アセットをアップロードする
- 更新チェック・更新機能は `curl`, `jq`, `sha256sum`/`shasum` に依存するが、本体機能（ディレクトリ作成と移動）は外部コマンドに依存しない
- シェル関数として動作するため、親シェルの `cwd` を変更できる
- ShellCheck の警告に従い、POSIX Shell 互換性を維持する
